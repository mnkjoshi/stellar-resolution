import{c as M,h8 as _,r as n,m as r,b as f,fo as L,kc as m,rL as k,rM as A,rN as U,rO as h,rP as b,rQ as c,rR as w,rS as $,rT as C,rU as O,rV as Q}from"./index-BCRx-hwS.js";import{B as l,a as F,w as R,b as z,A as D,J as T,K as V}from"./SketchTooltipInfo-ClKEIWze.js";import{U as B}from"./quantityFormatUtils-BW0quzk0.js";let s=class extends M{constructor(i){super(i),this.actual=null,this.lockable=!0,this.id=_(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(i){this.lockable&&this._set("committed",i)}get dirty(){return this.inputValue!=null}get locked(){return this.lockable&&this.committed!=null}onInput(i){this.inputValue=i,this.invalid=!1}onCommit(i,a,t){this.lockable?this._onCommitLockable(i,t):this._onCommitNonLockable(t),this.invalid&&i==="commit-and-exit"||t.onCommit(a,i)}_onCommitLockable(i,a){const{inputValue:t,locked:e}=this;e&&d(t)?this.unlock():(i==="commit-and-exit"&&!e||t!=null)&&this._parseInputAndLock(a)}_onCommitNonLockable(i){const{inputValue:a}=this;d(a)?this.lockable?this.setActual(null):this.clearInputValue():a!=null&&this._parseInputAndSetActual(i)}applyValue(i){this.lockable?this.lock(i):this.setActual(i)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(i){this.actual=i,this.clearInputValue()}lock(i){this.lockable&&(this.committed=i??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(i){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(i))}getSuffix(i){const{suffix:a}=this;return typeof a=="function"?a(i):a}getFormattedValue(i){const{actual:a,committed:t,format:e}=this;return t!=null?e(t,i):a!=null?e(a,i):null}getRawDisplayValue(i){const{actual:a,committed:t,inputValue:e}=this;return e??(this.lockable&&t!=null?this.formatForInputMode(t,i):a!=null?this.formatForInputMode(a,i):null)}_parseInputAndSetActual(i){const{inputValue:a}=this;if(a==null||d(a))return this.setActual(null);const t=this.parse(a,i);t!=null?this.setActual(t):this.invalid=!0}_parseInputAndLock(i){const{inputValue:a,actual:t}=this;if(d(a))return this.unlock();if(a==null)return this.lock(t);const e=this.parse(a,i);e!=null?this.lock(e):this.invalid=!0}};function d(i){return i!=null&&i.trim()===""}n([r()],s.prototype,"actual",void 0),n([r()],s.prototype,"committed",null),n([r()],s.prototype,"dirty",null),n([r()],s.prototype,"format",void 0),n([r()],s.prototype,"formatForInputMode",void 0),n([r()],s.prototype,"lockable",void 0),n([r()],s.prototype,"locked",null),n([r()],s.prototype,"id",void 0),n([r()],s.prototype,"inputValue",void 0),n([r()],s.prototype,"name",void 0),n([r()],s.prototype,"parse",void 0),n([r()],s.prototype,"readOnly",void 0),n([r()],s.prototype,"suffix",void 0),n([r()],s.prototype,"title",void 0),n([r()],s.prototype,"visible",void 0),n([r()],s.prototype,"invalid",void 0),n([r()],s.prototype,"unlockOnVertexPlacement",void 0),s=n([f("esri.views.interactive.tooltip.fields.TooltipField")],s);let g=class extends s{constructor(a){super(a),this.showAsZ=!1}normalizeCtorArgs(a){const t=e=>e.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:L,parse:l({createQuantity:(e,o)=>k(e,t(o))}),format:(e,o)=>o.formatters.verticalLength(e),formatForInputMode:(e,o)=>o.formatters.scalar(m(e,t(o))),suffix:e=>e.inputUnitInfos.verticalLength.abbreviation,title:e=>e.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1,...a}}};n([r()],g.prototype,"showAsZ",void 0),g=n([f("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],g);let v=class extends s{constructor(i){super(i),this.precision=1}normalizeCtorArgs(i){const a=t=>t.inputUnitInfos.angle.unit;return{name:"orientation",actual:null,parse:l({createQuantity:(t,e)=>U(t,a(e),"geographic"),sanitize:F}),format:t=>{const e=A(t);return B(e,"geographic",this.precision)},formatForInputMode:(t,e)=>{const o=A(t);return e.formatters.scalar(o)},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.orientation,...i}}};n([r()],v.prototype,"precision",void 0),v=n([f("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],v);let y=class extends s{constructor(i){super(i),this.precision=null}normalizeCtorArgs(i){const a=t=>t.inputUnitInfos.length.unit;return{name:"size",actual:null,parse:l({createQuantity:(t,e)=>k(t,a(e))}),format:(t,e)=>e.formatters.length(t),formatForInputMode:(t,e)=>e.formatters.scalar(m(t,a(e))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.size,...i}}};n([r()],y.prototype,"precision",void 0),y=n([f("esri.views.interactive.tooltip.fields.TooltipFieldSize")],y);function K(i){const a=e=>e.inputUnitInfos.angle.unit,t=e=>e.sketchOptions.values.effectiveDirectionMode;return new s({name:"direction",actual:b,parse:l({createQuantity:(e,o)=>U(e,a(o),"geographic"),sanitize:F}),format:(e,o)=>{const u=t(o),p=w(e,u);switch(u){case c.Absolute:return o.formatters.direction(p);case c.Relative:return o.formatters.directionRelative(p);case c.RelativeBilateral:return o.formatters.directionRelativeBilateral(p)}},formatForInputMode:(e,o)=>{const u=w(e,t(o));return o.formatters.scalar(m(u,a(o)))},suffix:e=>e.inputUnitInfos.angle.abbreviation,title:e=>{const o=t(e),{absolute:u,relative:p}=e.messages.sketch.direction;switch(o){case c.Absolute:return u;case c.Relative:case c.RelativeBilateral:return p}},...i})}function I(i){const a=t=>t.inputUnitInfos.length.unit;return new s({name:"distance",actual:L,parse:l({createQuantity:(t,e)=>k(Math.max(t,0),a(e))}),format:(t,e)=>e.formatters.length(t),formatForInputMode:(t,e)=>e.formatters.scalar(m(t,a(e))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance,...i})}function W(i){return I({format:(a,t)=>t.formatters.totalLength(a),title:a=>a.messages.sketch.totalLength,readOnly:!0,...i})}function q(i){return I({...i})}function G(i){const a=t=>t.inputUnitInfos.length.unit;return I({...i,parse:l({createQuantity:(t,e)=>k(t,a(e))}),format:(t,e)=>e.formatters.lengthRelative(t)})}function P(i){return new g(i)}function tt(i){return new v(i)}function et(i){return new y(i)}function it(i){return x("scale",{name:"scale",actual:null,parse:l({createQuantity:a=>h(Math.abs(a))}),...i})}function at(i){const a=t=>t.inputUnitInfos.area.unit;return new s({name:"area",actual:$,parse:l({createQuantity:(t,e)=>C(t,a(e))}),format:(t,e)=>e.formatters.area(t),formatForInputMode:(t,e)=>e.formatters.scalar(m(t,a(e))),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,readOnly:!0,...i})}function S(i){return new s({name:"x",actual:b,parse:z,format:(a,t)=>t.formatters.longitudeDecimalDegrees(a),formatForInputMode:a=>R(a),suffix:a=>a.inputUnitInfos.angle.abbreviation,title:a=>a.messages.sketch.longitude,...i})}function X(i){return new s({name:"y",actual:b,parse:T,format:(a,t)=>t.formatters.latitudeDecimalDegrees(a),formatForInputMode:a=>D(a),suffix:a=>a.inputUnitInfos.angle.abbreviation,title:a=>a.messages.sketch.latitude,...i})}function Y(i){return x("x",{name:"x",...i})}function N(i){return x("y",{name:"y",...i})}function x(i,a){return new s({actual:h(0),parse:l({createQuantity:t=>h(t)}),format:(t,e)=>e.formatters.scalar(t),formatForInputMode:(t,e)=>e.formatters.scalar(t),title:t=>t.messages.sketch[i],...a})}const nt=i=>{let a=class extends i{constructor(){super(...arguments),this.longitude=S(),this.latitude=X(),this.x=Y(),this.y=N(),this.elevation=P(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(t,e=t==null?void 0:t.spatialReference){if(this.geographic=!!e&&O(e),t==null)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){const o=Q(t,Z);this._setActualLonLat(V(o==null?void 0:o[0]),V(o==null?void 0:o[1]))}else this._setActualXY(h(t.x),h(t.y))}_setActualLonLat(t,e){this.longitude.actual=t,this.latitude.actual=e}_setActualXY(t,e){this.x.actual=t,this.y.actual=e}};return n([r()],a.prototype,"geographic",void 0),n([r()],a.prototype,"effectiveX",null),n([r()],a.prototype,"effectiveY",null),n([r()],a.prototype,"key",null),a=n([f("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],a),a},Z=[0,0];export{q as F,at as Q,it as R,nt as h,et as j,tt as k,W as w,G as x,K as y};
